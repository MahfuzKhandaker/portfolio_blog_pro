{% extends '_base.html' %}

{% load static %}

{% load markdown_extras %}

{% block title %}Home{% endblock title %}

{% block content %}

<!-- Hero Section-->

<section style="background-image: url('static/images/moon.jpg'); background-size: cover; background-position: center center" class="hero">
  <div class="container">
      <div class="row mb-2">
        <div class="col-lg-auto">
          <a href="{% url 'post-list' %}" class="hero-link">{{ post_num }} Posts</a> |
          <a href="{% url 'project_index' %}" class="hero-link">{{ project_num }} Projects</a>
          <h1>Build your ideas faster and easier with Python & Django Web Development Services</h1>
        </div>
      </div>
      <a href="#intro" class="continue link-scroll">
        Scroll Down
        <br>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-double-down" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M1.646 6.646a.5.5 0 0 1 .708 0L8 12.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
          <path fill-rule="evenodd" d="M1.646 2.646a.5.5 0 0 1 .708 0L8 8.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
        </svg>
      </a>
    </div>
  </section>

  <!-- Intro Section-->
  <section class="intro" id="intro">
    <div class="container">
      <div class="row">
        <div class="col-md-7">
          <h3>We build custom web application that’s responsive (mobile-ready), reactive (light-speed fast), with a full-featured admin interface to manage the content and more...</h3>
          <a href="#" class="hero-link">CONTACT</a>
        </div>
        <div class="col-md-5">
          <blockquote class="twitter-tweet"><p lang="en" dir="ltr">Test purpose only:<br>You can use your skills to build your own websites and web applications. Want to make a profitable website or application? With this skill, you won’t http://127.0.0.1:8000/blogs/responsibility-of-web-developer/ <a href="https://twitter.com/hashtag/python?src=hash&amp;ref_src=twsrc%5Etfw">#python</a> <a href="https://twitter.com/hashtag/django?src=hash&amp;ref_src=twsrc%5Etfw">#django</a></p>&mdash; Mahfuz Khandaker (@MahfuzKhandake2) <a href="https://twitter.com/MahfuzKhandake2/status/1364645028400828416?ref_src=twsrc%5Etfw">February 24, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>        </div>
      </div>
    </div>
  </section>


<section class="featured-posts">
  <div class="container">
    <h1>Featured posts</h1>
    <!-- Blog post -->
    {% include 'pages/featured_posts.html' %}
  </div>

  </section>
  
   <!-- Divider Section-->
   <section class="divider">
    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <blockquote class="twitter-tweet"><p lang="en" dir="ltr">Test purpose only:<br>You can use your skills to build your own websites and web applications. Want to make a profitable website or application? With this skill, you won’t http://127.0.0.1:8000/blogs/responsibility-of-web-developer/ <a href="https://twitter.com/hashtag/python?src=hash&amp;ref_src=twsrc%5Etfw">#python</a> <a href="https://twitter.com/hashtag/django?src=hash&amp;ref_src=twsrc%5Etfw">#django</a></p>&mdash; Mahfuz Khandaker (@MahfuzKhandake2) <a href="https://twitter.com/MahfuzKhandake2/status/1364645028400828416?ref_src=twsrc%5Etfw">February 24, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>        
        </div>
        <div class="col-md-7">
          <h3>We love <strong>Django</strong> using Python code on the back end with <strong> JavaScript, Jquery, Ajax, CSS, Bootstrap4 </strong> and mostly familiar with <strong>VueJS,</strong> a JavaScript framework on the front end, for <strong>Web Development</strong> - with a passion for programming and learning - the perfect combination. Our primary areas of interest are web technologies and Python in general. Never afraid of diving in the deep end and figuring out how to climb out as well as to get into tech domain profusely.</h3>
          <a href="#" class="hero-link">View More</a>
        </div>
      </div>
    </div>
  </section>
    <!-- Latest Posts -->
    <section class="latest-posts"> 
      <div class="container">

        <header role="banner">
          <h1>Latest from the blog</h1>
        </header>

        <div class="row mb-2">
          {% for post in most_recent %}
          <div class="col-md-6">
            <div class="card flex-md-row mb-4 box-shadow h-md-300">
            
              <div class="card-img-wrapper flex-auto d-none d-md-block">
                {% if post.thumbnail %}
                <img class="card-img-left" src="{{ post.thumbnail.url }}" alt="{{ post.title }}">
                {% endif %}
              </div>
              <div class="card-body d-flex flex-column align-items-start">
                <strong class="d-inline-block mb-1 text-primary"><a href="{{ post.category.get_absolute_url }}">{{ post.category }}</a></strong>
                <h3 class="card-title"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
                <div class="mb-1 text-muted">             
                  {% include 'blogs/post_info.html' %}
                </div>
                <p class="text-justify mb-auto">{{post.overview|truncatewords:15}} <a class="btn btn-sm btn-outline-dark" href="{{ post.get_absolute_url }}" role="button">Read more</a></p>
      
                <div class="d-flex justify-content-start align-items-start">
                  <div class="btn-group mb-2">
                    {% for tag in post.tags.all %}
                    <button type="button" class="btn btn-sm btn-outline-info"><a href="{% url 'post-by-tag' tag.slug %}">{{ tag }}</a></button>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
        </div>
      </div>
    </section>

{% endblock content %}

{% block javascript %}
<script>
  $(document).ready(function(){
    $('#lazyLoadFeaturedPost').on('click', function() {
    var link = $(this);
    var page = link.data('page');
    
    $.ajax({
      type: 'POST',
      url: 'lazy_load_featured_posts/',
      data: {
        'page': page,
        'csrfmiddlewaretoken': '{{ csrf_token }}' // from index.html
      },
      success: function(data) {
        // if there are still more pages to load,
        // add 1 to the "Load More Posts" link's page data attribute
        // else hide the link
        if (data.has_next) {
            link.data('page', page+1);
        } else {
          link.hide();
        }
        // append html to the posts div
        $('#projects').append(data.projects_html);
        console.log(data.projects_html)
      },
      error: function(xhr, status, error) {
        // shit happens friends!
      }
    });
  });
  })
</script>
{% endblock javascript %}